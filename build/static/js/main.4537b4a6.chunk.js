(this["webpackJsonpfill-a-form"]=this["webpackJsonpfill-a-form"]||[]).push([[0],{24:function(e,t){e.exports={ADDR:"http://localhost"}},36:function(e,t,a){},44:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),c=a.n(r),i=(a(44),a(15)),l=a(16),o=a(11),d=a(20),m=a(19),h=a(13),u=a(5),b=a(14),j=a.n(b),f=(a(24),function(){return j()({method:"GET",headers:{"Content-Type":"application/json"},url:"/api/getforms"})}),p=function(){return j()({method:"GET",headers:{"Content-Type":"application/json"},url:"/api/getapprovers"})},v=(a(18),a(36),a(1));var O=function(e){var t=e.dbForms,a=Object(u.g)();return Object(v.jsx)("div",{className:"container-form-selection",children:t&&0===t.length?Object(v.jsx)("div",{className:"d-flex justify-content-center text-center text-light",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-12 mb-2",children:Object(v.jsx)("div",{className:"spinner-border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("strong",{className:"",children:"Loading..."})})]})}):Object(v.jsxs)("form",{className:"card bg-light bg-gradient",children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("h5",{className:"card-title mb-3",children:"Please select a form"}),Object(v.jsxs)("select",{value:e.id,className:"form-select mb-3",onChange:function(t){e.onMakeSelection(t.target.value)},children:[Object(v.jsx)("option",{value:"-1",children:"-- select a form --"}),t.map((function(e){return Object(v.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(v.jsx)("div",{className:"card-footer text-end",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){"-1"!==e.id&&a.push("/form")},children:"Confirm"})})]})})},x=a(27),g=new(function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"getForm",value:function(e){return j.a.post("/api/getform",e)}}]),e}()),N=a.p+"static/media/Beta-HealthcareLG-Trebuchet-MS-font.4688ae12.png",y=a(39),F=a(17);var _=function(e){var t=s.a.useState(!1),a=Object(y.a)(t,2),r=a[0],c=a[1],i=e.success;return Object(n.useEffect)((function(){c(e.show)}),[e.show]),i?Object(v.jsx)(F.a,{show:r,dialogClassName:"modal-dialog-centered",children:Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)(F.a.Header,{children:Object(v.jsx)(F.a.Title,{className:"text-success bg-gradient",children:"Success!"})}),Object(v.jsx)(F.a.Body,{children:"Your approval request has been submitted."}),Object(v.jsx)(F.a.Footer,{as:"footer",children:Object(v.jsx)(h.b,{className:"btn btn-outline-dark",to:"/",children:"Go to homepage"})})]})}):Object(v.jsxs)("div",{className:"container container-form alert alert-danger",role:"alert",children:[Object(v.jsx)("h5",{className:"alert-heading",children:"Submission failed"}),Object(v.jsx)("hr",{}),Object(v.jsxs)("p",{className:"mb-0",children:[Object(v.jsx)(h.b,{className:"btn btn-primary",to:"/",children:"Click here"})," ","to fill another form"]})]})};var C=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.sendForm=function(e){e.preventDefault();var t,a=n.state.checkedApprovers,s=[],r=Object(x.a)(a.keys());try{for(r.s();!(t=r.n()).done;){var c=t.value;!0===a.get(c)&&s.push(c)}}catch(o){r.e(o)}finally{r.f()}var i={filled_by:n.state.filled_by,form_id:n.state.formID,form_title:n.state.name,fields:n.state.formFields,approved:!1,date_approved:null,approval:n.state.approvers,department:n.state.department},l=!1;i.fields?j.a.post("/api/sendform",i).then().catch((function(e){l=!0,console.log(e)})):console.log("input fields are required"),l||n.setState({done:!0})},n.handleChange=function(e,t){var a,s=n.state.formFields,r=Object(x.a)(s);try{for(r.s();!(a=r.n()).done;){var c=a.value;c._id===t&&(c.value=e)}}catch(i){r.e(i)}finally{r.f()}n.setState({formFields:s})},n.handleNameChange=function(e){n.setState({filled_by:e})},n.handleDeptChange=function(e){n.setState({department:e})},n.handleValidation=function(e){var t=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(t).array.forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))},n.state={name:"",formID:"",filled_by:"",department:"",formFields:[],formData:{},done:!1,approvers:[],checkedApprovers:new Map,approversValid:!1},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.sendForm=n.sendForm.bind(Object(o.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(o.a)(n)),n.fieldsGenerator=n.fieldsGenerator.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;this.props.dbForms;var t={},a="",n=[],s=this.props.id;s&&this._isMounted&&(this.setState({formID:s}),g.getForm({id:this.props.id}).then((function(s){a=s.data.name,n=s.data.fields,e.setState({name:a,filled_by:"",formFields:n,formData:t});for(var r=0;r<n.length;r++)t[n[r].name]="",n[r].value=""}))),p().then((function(t){t.data&&e._isMounted&&e.setState({approvers:t.data})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"fieldsGenerator",value:function(e){var t=this;return e?e.map((function(e){if(!e.type)return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:e.name,onChange:function(a){return t.handleChange(a.target.value,e._id)}},e._id),Object(v.jsx)("label",{htmlFor:"floatingInput",className:"text-muted",children:e.name},"label_"+e._id)]},"div_"+e._id);switch(e.type.name){case"select":return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsxs)("select",{className:"form-select",id:"floatingSelect","aria-label":"Floating label",onChange:function(e){return t.handleDeptChange(e.target.value)},children:[Object(v.jsx)("option",{selected:!0,value:"",children:"-- department --"}),e.type.options.map((function(e){return Object(v.jsx)("option",{value:e,children:e},"key_"+e)}))]}),Object(v.jsx)("label",{htmlFor:"floatingSelect",className:"text-muted",children:e.name},"label_"+e._id)]},"div_"+e._id);default:return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:e.name,onChange:function(a){return t.handleChange(a.target.value,e._id)}},e._id),Object(v.jsx)("label",{htmlFor:"floatingInput",className:"text-muted",children:e.name},"label_"+e._id)]},"div_"+e._id)}})):Object(v.jsx)("div",{children:"No DATA"})}},{key:"errorClass",value:function(e){return e?"is-invalid":""}},{key:"validateForm",value:function(){}},{key:"render",value:function(){var e=this;if("-1"===this.props.id)return Object(v.jsx)(u.a,{to:"/"});var t=this.state.formFields;this.state.approvers;return Object(v.jsx)("div",{className:"container-form",children:Object(v.jsxs)("form",{className:"card bg-light bg-gradient",autoComplete:"off",children:[Object(v.jsx)("div",{className:"row card-body",children:Object(v.jsx)("img",{src:N,className:"img-fluid",alt:"logo"})}),Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("h2",{className:"card-title mb-4 text-center",children:[this.state.name," form"]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"Employee Name",onChange:function(t){e.handleNameChange(t.target.value)}}),Object(v.jsx)("label",{className:"text-muted",htmlFor:"floatingInput",children:"Employee Name"})]}),this.fieldsGenerator(t)]}),Object(v.jsx)("div",{className:"card-body"}),Object(v.jsx)("div",{className:"card-footer text-end",children:Object(v.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:this.sendForm,children:"Submit"})}),Object(v.jsx)(_,{success:!0,show:this.state.done})]})})}}]),a}(n.Component),k=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={selectedFormID:"-1",dbForms:[]},n.handleFormSelect=n.handleFormSelect.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){t.data&&e.setState({dbForms:t.data})}))}},{key:"handleFormSelect",value:function(e){this.setState({selectedFormID:e})}},{key:"render",value:function(){var e=this,t=this.state.selectedFormID,a=this.state.dbForms;return Object(v.jsx)(h.a,{children:Object(v.jsx)("div",{className:"App-Container container d-flex align-items-center justify-content-center",children:Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{path:"/",component:function(){return Object(v.jsx)(O,{id:t,dbForms:a,onMakeSelection:e.handleFormSelect})},exact:!0}),Object(v.jsx)(u.b,{path:"/form",component:function(){return Object(v.jsx)(C,{id:t,dbForms:a})},exact:!0})]})})})}}]),a}(n.Component);c.a.render(Object(v.jsx)(k,{}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.4537b4a6.chunk.js.map