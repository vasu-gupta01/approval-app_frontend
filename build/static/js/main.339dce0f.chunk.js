(this["webpackJsonpfill-a-form"]=this["webpackJsonpfill-a-form"]||[]).push([[0],{109:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(14),l=a.n(i),c=(a(59),a(19)),r=a(20),d=a(15),o=a(28),m=a(27),h=a(18),j=a(6),b=a(16),u=a.n(b),f=(a(33),function(){return u()({method:"GET",headers:{"Content-Type":"application/json"},url:"/api/getforms"})}),p=function(){return u()({method:"GET",headers:{"Content-Type":"application/json"},url:"/api/getapprovers"})},v=(a(21),a(47),a(2));var x=function(e){var t=e.dbForms,a=Object(j.g)();return Object(v.jsx)("div",{className:"container-form-selection",children:t&&0===t.length?Object(v.jsx)("div",{className:"d-flex justify-content-center text-center text-light",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-12 mb-2",children:Object(v.jsx)("div",{className:"spinner-border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("strong",{className:"",children:"Loading..."})})]})}):Object(v.jsxs)("form",{className:"card bg-light bg-gradient",children:[Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsx)("h5",{className:"card-title mb-3",children:"Please select a form"}),Object(v.jsxs)("select",{value:e.id,className:"form-select mb-3",onChange:function(t){e.onMakeSelection(t.target.value)},children:[Object(v.jsx)("option",{value:"-1",children:"-- select a form --"}),t.map((function(e){return Object(v.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(v.jsx)("div",{className:"card-footer text-end",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){"-1"!==e.id&&a.push("/form")},children:"Confirm"})})]})})},g=a(30),O=new(function(){function e(){Object(c.a)(this,e)}return Object(r.a)(e,[{key:"getForm",value:function(e){return u.a.post("/api/getform",e)}},{key:"getDepartments",value:function(){return u.a.get("/api/getdepartments")}}]),e}()),N=a.p+"static/media/Beta-HealthcareLG-Trebuchet-MS-font.4688ae12.png",y=a(54),_=a(13);var F=function(e){var t=n.a.useState(!1),a=Object(y.a)(t,2),i=a[0],l=a[1],c=e.success;return Object(s.useEffect)((function(){l(e.show)}),[e.show]),c?Object(v.jsx)(_.a,{show:i,dialogClassName:"modal-dialog-centered",children:Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)(_.a.Header,{children:Object(v.jsx)(_.a.Title,{className:"text-success bg-gradient",children:"Success!"})}),Object(v.jsx)(_.a.Body,{children:"Your approval request has been submitted."}),Object(v.jsx)(_.a.Footer,{as:"footer",children:Object(v.jsx)(h.b,{className:"btn btn-outline-dark",to:"/",children:"Go to homepage"})})]})}):Object(v.jsx)(_.a,{show:i,dialogClassName:"modal-dialog-centered",children:Object(v.jsxs)("div",{className:"",children:[Object(v.jsx)(_.a.Header,{children:Object(v.jsx)(_.a.Title,{className:"text-danger bg-gradient",children:"Connection Failure!"})}),Object(v.jsx)(_.a.Body,{children:"An error occured please try again later."}),Object(v.jsx)(_.a.Footer,{as:"footer",children:Object(v.jsx)(h.b,{className:"btn btn-outline-dark",to:"/",children:"Go to homepage"})})]})})},C=(a(85),a(53)),S=a.n(C);function k(){return Object(v.jsx)("div",{className:"d-flex justify-content-center text-center text-light",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-12 mb-2",children:Object(v.jsx)("div",{className:"spinner-border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}),Object(v.jsx)("div",{className:"col-12",children:Object(v.jsx)("strong",{className:"",children:"Loading..."})})]})})}var D=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e))._isMounted=!1,s.sendForm=function(e){if(e.preventDefault(),s.state.formFields.map((function(e){e.value=s.state.formData[e._id]})),s.validateForm()){var t,a=s.state.checkedApprovers,n=[],i=Object(g.a)(a.keys());try{for(i.s();!(t=i.n()).done;){var l=t.value;!0===a.get(l)&&n.push(l)}}catch(d){i.e(d)}finally{i.f()}var c={filled_by:s.state.filled_by,form_id:s.state.formID,form_title:s.state.name,fields:s.state.formFields,approved:!1,date_approved:null,approval:s.state.approvers,department:s.state.department},r=!1;c.fields?u.a.post("/api/sendform",c).then().catch((function(e){r=!0,s.setState({formSuccess:!1}),console.log(e)})):console.log("input fields are required"),r||s.setState({done:!0})}},s.handleChange=function(e,t){var a=s.state.formData;a[t]=e,s.setState({formData:a})},s.handleNameChange=function(e){s.setState({filled_by:e})},s.handleDeptChange=function(e){var t,a=s.state.formFields,n=Object(g.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;"Department"===i.name&&(i.value=e)}}catch(l){n.e(l)}finally{n.f()}s.setState({department:e}),s.setState({formFields:a})},s.state={name:"",formID:"",filled_by:"",department:"",formFields:[],formData:{},done:!1,approvers:[],checkedApprovers:new Map,approversValid:!1,timeout:null,fieldsLoading:!0,validMessages:{name:"Error"},validFields:{name:!0},departments:[],formSuccess:!0},s.handleChange=s.handleChange.bind(Object(d.a)(s)),s.sendForm=s.sendForm.bind(Object(d.a)(s)),s.handleNameChange=s.handleNameChange.bind(Object(d.a)(s)),s.fieldsGenerator=s.fieldsGenerator.bind(Object(d.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;this.props.dbForms;var t={},a="",s=[],n=this.props.id;n&&this._isMounted&&(this.setState({formID:n}),O.getForm({id:this.props.id}).then((function(n){if(n.data){a=n.data.name,s=n.data.fields,e.setState({name:a,filled_by:"",formFields:s,formData:t});for(var i=0;i<s.length;i++)t[s[i]._id]="",s[i].value="";e.setState({fieldsLoading:!1})}else e.setState({fieldsLoading:!0})})).catch((function(t){e.setState({fieldsLoading:!1}),e.setState({formSuccess:!1},(function(){e.setState({done:!0})}))}))),p().then((function(t){t.data&&e._isMounted&&e.setState({approvers:t.data})})),O.getDepartments().then((function(t){t.data&&e._isMounted&&e.setState({departments:t.data})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"fieldsGenerator",value:function(e){var t=this;return e?e.map((function(e){if(!e.type)return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",autoComplete:"off",className:"form-control",id:"floatingInput",placeholder:e.name,onChange:function(a){return t.handleChange(a.target.value,e._id)}},e._id),Object(v.jsx)("label",{htmlFor:"floatingInput",className:"text-muted",children:e.name},"label_"+e._id),Object(v.jsx)("div",{style:{display:t.state.validFields[e._id]?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:t.state.validMessages[e._id]})})]},"div_"+e._id);switch(e.type.name){case"department-select":return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsxs)("select",{className:"form-select",id:"floatingSelect","aria-label":"Floating label",onChange:function(a){return t.handleChange(a.target.value,e._id)},children:[Object(v.jsx)("option",{selected:!0,value:"",children:"-- department --"}),t.state.departments.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},"key_"+e._id)}))]}),Object(v.jsx)("label",{htmlFor:"floatingSelect",className:"text-muted",children:e.name},"label_"+e._id),Object(v.jsx)("div",{style:{display:t.state.validFields[e._id]?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:t.state.validMessages[e._id]})})]},"div_"+e._id);case"time":return Object(v.jsxs)("div",{className:" mb-3",children:[Object(v.jsxs)("label",{className:"me-3",children:[e.name,": "]}),Object(v.jsx)(S.a,{disableClock:!0,value:t.state.formData[e._id],minDate:new Date,onChange:function(a){t.handleChange(a,e._id)}}),Object(v.jsx)("div",{style:{display:t.state.validFields[e._id]?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:t.state.validMessages[e._id]})})]},"div_"+e._id);default:return Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",autoComplete:"off",className:"form-control",id:"floatingInput",placeholder:e.name,onChange:function(a){return t.handleChange(a.target.value,e._id)}},e._id),Object(v.jsx)("label",{htmlFor:"floatingInput",className:"text-muted",children:e.name},"label_"+e._id),Object(v.jsx)("div",{style:{display:t.state.validFields[e._id]?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:t.state.validMessages[e._id]})})]},"div_"+e._id)}})):Object(v.jsx)("div",{children:"No DATA"})}},{key:"validateForm",value:function(){var e=this.state.validMessages,t=this.state.validFields,a=!0;""===this.state.filled_by?(t.name=!1,e.name="This field is required.",a=!1):t.name=!0,""===this.state.department?(t.department=!1,e.department="This field is required.",a=!1):t.department=!0;var s,n=Object(g.a)(this.state.formFields);try{for(n.s();!(s=n.n()).done;){var i=s.value;i.required&&""===i.value?(t[i._id]=!1,e[i._id]="This field is required.",a=!1):t[i._id]=!0}}catch(l){n.e(l)}finally{n.f()}return this.setState({validMessages:e,validFields:t}),a}},{key:"render",value:function(){var e=this;if("-1"===this.props.id)return Object(v.jsx)(j.a,{to:"/"});var t=this.state.formFields;this.state.approvers;return this.state.fieldsLoading?Object(v.jsx)(k,{}):Object(v.jsx)("div",{className:"container-form",children:Object(v.jsxs)("form",{className:"card bg-light bg-gradient",autoComplete:"off",children:[Object(v.jsx)("div",{className:"row card-body",children:Object(v.jsx)("img",{src:N,className:"img-fluid",alt:"logo"})}),Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("h2",{className:"card-title mb-4 text-center",children:[this.state.name," form"]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsx)("input",{type:"text",autoComplete:"off",className:"form-control",id:"floatingInput",placeholder:"Employee Name",onChange:function(t){e.handleNameChange(t.target.value)}}),Object(v.jsx)("label",{className:"text-muted",htmlFor:"floatingInput",children:"Employee Name"}),Object(v.jsx)("div",{style:{display:this.state.validFields.name?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:this.state.validMessages.name})})]}),Object(v.jsxs)("div",{className:"form-floating mb-3",children:[Object(v.jsxs)("select",{className:"form-select",id:"floatingSelect","aria-label":"Floating label",onChange:function(t){return e.handleDeptChange(t.target.value)},children:[Object(v.jsx)("option",{selected:!0,value:"",children:"-- department --"}),this.state.departments.map((function(e){return Object(v.jsx)("option",{value:e.name,children:e.name},"key_"+e._id)}))]}),Object(v.jsx)("label",{htmlFor:"floatingSelect",className:"text-muted",children:"Department"}),Object(v.jsx)("div",{style:{display:this.state.validFields.department?"none":"block"},children:Object(v.jsx)("strong",{className:"text-danger m-1",children:this.state.validMessages.department})})]}),this.fieldsGenerator(t)]}),Object(v.jsx)("div",{className:"card-body"}),Object(v.jsx)("div",{className:"card-footer text-end",children:Object(v.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:this.sendForm,children:"Submit"})}),Object(v.jsx)(F,{success:this.state.formSuccess,show:this.state.done})]})})}}]),a}(s.Component),M=function(e){Object(o.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={selectedFormID:"-1",dbForms:[]},s.handleFormSelect=s.handleFormSelect.bind(Object(d.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){t.data&&e.setState({dbForms:t.data})}))}},{key:"handleFormSelect",value:function(e){this.setState({selectedFormID:e})}},{key:"render",value:function(){var e=this,t=this.state.selectedFormID,a=this.state.dbForms;return Object(v.jsx)(h.a,{children:Object(v.jsx)("div",{className:"App-Container container d-flex align-items-center justify-content-center",children:Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{path:"/",component:function(){return Object(v.jsx)(x,{id:t,dbForms:a,onMakeSelection:e.handleFormSelect})},exact:!0}),Object(v.jsx)(j.b,{path:"/form",component:function(){return Object(v.jsx)(D,{id:t,dbForms:a})},exact:!0})]})})})}}]),a}(s.Component);l.a.render(Object(v.jsx)(M,{}),document.getElementById("root"))},33:function(e,t){e.exports={ADDR:"http://localhost"}},47:function(e,t,a){},59:function(e,t,a){}},[[109,1,2]]]);
//# sourceMappingURL=main.339dce0f.chunk.js.map